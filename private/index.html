<script>
  const PASSWORD = "Greendoor22";

  function checkPassword() {
    const input = document.getElementById('password').value;
    const error = document.getElementById('error-message');

    if (input === PASSWORD) {
      localStorage.setItem('privateAccess', 'true');

      if (localStorage.getItem('formSubmitted') === 'true') {
        showContent();
      } else {
        showForm();
      }
    } else {
      error.innerText = "⚠️ The password you entered is incorrect. You are not authorized to access this section of the site. Please try again.";
    }
  }

  function goToContent() {
    localStorage.setItem('formSubmitted', 'true');
    document.getElementById('form-container').style.display = 'none';
    showContent();
  }

  function showForm() {
    document.getElementById('auth-container').style.display = 'none';
    document.getElementById('form-container').style.display = 'block';
  }

  function showContent() {
    document.getElementById('auth-container').style.display = 'none';
    document.getElementById('form-container').style.display = 'none';
    document.getElementById('content-container').style.display = 'block';
  }

  function monitorFormSubmission() {
    const formFrame = document.getElementById('form-frame');
    const continueBtn = document.getElementById('continueButton');
    let lastHeight = formFrame.clientHeight;

    setInterval(() => {
      const newHeight = formFrame.clientHeight;
      if (newHeight !== lastHeight) {
        continueBtn.style.display = 'inline-block';
      }
    }, 1000);
  }

  window.onload = () => {
    const hasAccess = localStorage.getItem('privateAccess') === 'true';
    const formDone = localStorage.getItem('formSubmitted') === 'true';

    if (hasAccess && formDone) {
      showContent();
    } else if (hasAccess) {
      showForm();
    }

    monitorFormSubmission();
  };
</script>
